
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Removing Unmanaged Files with Puppet - rodrigolima.github.io</title>
  <meta name="author" content="Rodrigo de Lima Silva">

  
  <meta name="description" content="Do you know what Puppet is? If you&rsquo;re a Sysadmin or a Dev, I strongly suggest you start learning about it. Puppet is a software configuration &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://rodrigodlima.github.io/blog/2018/03/01/removing-unmanaged-files-with-puppet/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="rodrigolima.github.io" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-61707751-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">rodrigolima.github.io</a></h1>
  
    <h2>$echo something | sed &#8216;s/something/Geek life, Information Technology, daily life and related topics/g&#8217;</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="rodrigodlima.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/indice">Index</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Removing Unmanaged Files with Puppet</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-03-01T21:34:54-03:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2018</span></span> <span class='time'>9:34 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Do you know what Puppet is? If you&rsquo;re a Sysadmin or a Dev, I strongly suggest you start learning about it. Puppet is a software configuration management utility. Puppet&rsquo;s development is coordinated by Puppet Labs. Here&rsquo;s the link: <a href="https://puppet.com/">https://puppet.com/</a>.</p>

<p>I won&rsquo;t go deep into the concepts, I&rsquo;ll just share a tip that can be useful in some situations.</p>

<p>You have multiple Apache vhost configuration files managed by Puppet, for example, but you don&rsquo;t want new files to be created manually that aren&rsquo;t orchestrated/managed by Puppet, as this could cause you to lose control of what&rsquo;s being deployed to production.</p>

<p>To solve this, there&rsquo;s an attribute that can help us with this, and it&rsquo;s from the &ldquo;file&rdquo; resource type: <strong>purge</strong></p>

<pre><code>file { '/etc/httpd/confs.d':
    ensure  =&gt; 'directory',
    recurse =&gt; true,
    purge   =&gt; true,
}

file { '/etc/httpd/confs.d/www.conf':
    ensure =&gt; 'present',
    source =&gt; 'puppet://modules/httpd/www.conf',
}
</code></pre>

<p>With the above configuration, Puppet will maintain only the www.conf file in the /etc/httpd/confs.d directory. All manually created files will be removed after the agent communicates with the Puppet server.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Rodrigo de Lima Silva</span></span>

      




<time class='entry-date' datetime='2018-03-01T21:34:54-03:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2018</span></span> <span class='time'>9:34 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/configuration-management/'>configuration management</a>, <a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/puppet/'>puppet</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="https://rodrigodlima.github.io/blog/2018/03/01/removing-unmanaged-files-with-puppet/" data-via="rodrigodlima" data-counturl="https://rodrigodlima.github.io/blog/2018/03/01/removing-unmanaged-files-with-puppet/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2017/03/20/automating-commands-with-fabric/" title="Previous Post: Automating Commands with Fabric">&laquo; Automating Commands with Fabric</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About me</h1>
  <p>DevOps Engineer with several years of experience in infrastructure and automation. I hold multiple certifications including RHCE (Red Hat Certified Professional), LPIC1 (Linux Professional Institute), CKA (Certified Kubernetes Administrator), AWS Certified Cloud Practitioner, and Azure Fundamentals. Specialized in configuration management, container orchestration, and cloud infrastructure using tools like Puppet, Ansible, Kubernetes. Deep understanding of Internal Developer Platforms (IDP) and platform engineering practices, including tools like Backstage , Crossplane and Argocd aimed at streamlining developer workflows and enhancing platform self-service capabilities.
Passionate about automation, Python development, and sharing knowledge about DevOps practices, Linux systems administration, and cloud technologies. Feel free to reach out!</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/03/01/removing-unmanaged-files-with-puppet/">Removing Unmanaged Files with Puppet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/20/automating-commands-with-fabric/">Automating Commands with Fabric</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/14/changing-runlevel-on-centos7/">Changing Runlevel on CentOS7</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/11/maintaining-octopress-blog-on-different-machines/">Maintaining Octopress Blog on Different Machines</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/10/bash-completion-for-macos-sierra/">Bash Completion for MacOS Sierra</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/rodrigodlima">@rodrigodlima</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rodrigodlima',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/rodrigodlima?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2025 - Rodrigo de Lima Silva -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
